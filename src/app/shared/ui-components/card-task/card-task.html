<div class="task-card"
     cdkDrag
     [ngClass]="getStatusClass()">
     
  <div class="card-header">
    <span class="priority-badge" [ngClass]="getPriorityClass()">
      {{ task.priority === 'high' ? 'Élevée' : 
         task.priority === 'medium' ? 'Moyenne' : 'Basse' }}
    </span>
  </div>

  <div class="card-content">
    <h3 class="task-title">{{ task.title }}</h3>
    <p class="task-desc">{{ task.description }}</p>

    <div class="progress-container">
      <div class="progress-bar">
        <div class="progress-fill" [style.width]="task.progress + '%'"></div>
      </div>
      <div class="progress-info">
        <span class="progress-percent">{{ task.progress }}% complété</span>
      </div>
    </div>

    <div class="tags" *ngIf="task.tags?.length">
      <span *ngFor="let tag of task.tags" class="tag">
        {{ tag }}
      </span>
    </div>
  </div>

  <div class="card-footer">
    <div class="assignee-info">
      <span class="assignee-label">Assigné à:</span>
      <span class="assignee-name">{{ task.assignee || 'Non assigné' }}</span>
    </div>
    
    <div class="deadline" [class.overdue]="task.isOverdue">
      <i class="far fa-calendar-alt"></i>
      <span>{{ formatDate(task.deadline) }}</span>
      <span class="status-badge" *ngIf="task.isOverdue">EN RETARD</span>
    </div>
  </div>
</div>