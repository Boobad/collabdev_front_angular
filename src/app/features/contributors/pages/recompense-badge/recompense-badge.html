<main>
  <section>
    <div class="container">
      <div class="content-area">
        <div class="badges-header">
          <a (click)="goBack()" class="back-link">
            <i class="material-icons-outlined">arrow_back</i>
          </a>
          <h2>Badges Obtenus</h2>
        </div>

        <!-- Section des badges -->
        <div class="badges-grid">
          <div *ngFor="let badge of badges" class="badge-card"
               [class.atteint]="badge.dejaObtenu"
               [class.platinum]="badge.typeBadge === 'PLATINE'">
            
            <div class="badge-image-container">
              <!-- Image du badge -->
              <img [src]="getBadgeImage(badge.typeBadge)" [alt]="'Badge ' + badge.typeBadge">
              
              <!-- Cadenas si NON obtenu -->
              <i *ngIf="!badge.dejaObtenu" 
                 class="material-icons-outlined lock-icon">
                lock
              </i>
            </div>

            <span class="badge-title">Badge {{ getBadgeName(badge.typeBadge) }}</span>
            <span *ngIf="badge.dejaObtenu" class="badge-date">Obtenu</span>
          </div>
        </div>

        <!-- Section progression -->
        <div class="progression-section">
          <h3>Progression vers les prochains badges</h3>
          <div *ngFor="let badge of nextBadges" class="badge-progression">
            <p>Badge "{{ getBadgeName(badge.typeBadge) }}" - {{ getProgressPercentage(badge) }}%</p>
            <div class="progress-bar-container">
              <div class="progress-bar" [style.width.%]="getProgressPercentage(badge)"></div>
            </div>
            <small>{{ getContributionText(badge) }}</small>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
