<main>
  <section>
    <div class="container">
      <div class="content-area">
        <div class="badges-header">
          <a (click)="goBack()" class="back-link">
            <i class="material-icons-outlined">arrow_back</i>
          </a>
          <h2>Badges Obtenus</h2>
        </div>

        <!-- Section des badges -->
        <div class="badges-grid">
          <div *ngFor="let badge of badges" class="badge-card" [class.atteint]="badge.atteint" [class.platinum]="badge.type === 'PLATINE'">
            <div class="badge-image-container">
              <img [src]="getBadgeImage(badge.type)" [alt]="'Badge ' + badge.type">
              <i *ngIf="!badge.atteint && badge.type === 'PLATINE'" class="material-icons-outlined download-icon">lock</i>
            </div>
            <span class="badge-title">Badge {{ getBadgeName(badge.type) }}</span>
            <span *ngIf="badge.atteint" class="badge-date">Obtenu</span>
          </div>
        </div>

        <!-- Section progression -->
        <div class="progression-section">
          <h3>Progression vers les prochains badges</h3>
          <div *ngFor="let badge of nextBadges" class="badge-progression">
            <p>Badge "{{ getBadgeName(badge.type) }}" - {{ getProgressPercentage(badge) }}%</p>
            <div class="progress-bar-container">
              <div class="progress-bar" [style.width.%]="getProgressPercentage(badge)"></div>
            </div>
            <small>{{ getContributionText(badge) }}</small>
          </div>
        </div>

        <!-- Section détails des récompenses -->
        <div class="reward-details-section">
          <div class="reward-header">
            <h3>Détails des récompenses</h3>
          </div>
          
          <div class="reward-cards">
            <div *ngFor="let badge of earnedBadges" class="reward-card" [class]="badge.type.toLowerCase()">
              <div class="reward-badge-icon">
                <img [src]="getBadgeImage(badge.type)" [alt]="'Badge ' + badge.type">
              </div>
              <div class="reward-info">
                <span class="reward-title">Badge {{ getBadgeName(badge.type) }}</span>
                <span class="reward-description">{{ badge.description }}</span>
                <span class="reward-coin">+{{ badge.coinRecompense }} coins</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>